{
  "version": 3,
  "sources": ["../autenticate.route.ts"],
  "sourcesContent": ["import { Request, Response } from 'express'\nimport express from 'express'\nimport { validateInputSchema } from './validate.middleware';\nimport { makeBodySchema, makeParamsSchema, sendResponse } from './utils';\nimport { decodeMagicJWT } from './jwt.utils';\nimport { RawAuthenticationSchema, RawAuthentication, TokenSchema, Token } from \"./authenticate.schema\";\nimport * as BL from \"./autheticate.operations\";\n\nimport bodyParser from 'body-parser'\nconst jsonParser = bodyParser.json()\n\nexport const authenticateRouter = express.Router()\n\nauthenticateRouter.post(\"/\", jsonParser, validateInputSchema(makeBodySchema(RawAuthenticationSchema)), async (req: Request, res: Response) => {\n  try {\n  const userToAdd = req.body as RawAuthentication;\n  const toReturn = await BL.addAutheticateRequest(userToAdd)\n  sendResponse(toReturn, res)\n  } catch (err) {\n    console.log(err)\n      res.status(500).send(\"Something went wrong\")\n  }\n})\n\nauthenticateRouter.get(\"/verify/token/:token\", validateInputSchema(makeParamsSchema(TokenSchema)), async (req: Request, res: Response) => {\n  try {\n    const params = req.params as Token;\n    const token = decodeMagicJWT(params.token)\n    await BL.processVerfication(token)\n    res.send(\"Verfied\")\n  } catch (err) {\n      res.status(500).send(\"Something went wrong\")\n  }\n})\n\nauthenticateRouter.post(\"/verify/callback\", jsonParser,  async (req: Request, res: Response) => {\n  try {\n    console.log(\"call back Body\",req.body)\n    res.send(\"Verfied\")\n  } catch (err) {\n      res.status(500).send(\"Something went wrong\")\n  }\n})\n\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,IAAAA,kBAAoB;AACpB,sBAAoC;AACpC,mBAA+D;AAC/D,iBAA+B;AAC/B,0BAA+E;AAC/E,SAAoB;AAEpB,yBAAuB;AACvB,MAAM,aAAa,mBAAAC,QAAW,KAAK;AAE5B,MAAM,qBAAqB,gBAAAC,QAAQ,OAAO;AAEjD,mBAAmB,KAAK,KAAK,gBAAY,yCAAoB,6BAAe,2CAAuB,CAAC,GAAG,OAAO,KAAc,QAAkB;AAC5I,MAAI;AACJ,UAAM,YAAY,IAAI;AACtB,UAAM,WAAW,MAAM,GAAG,sBAAsB,SAAS;AACzD,mCAAa,UAAU,GAAG;AAAA,EAC1B,SAAS,KAAP;AACA,YAAQ,IAAI,GAAG;AACb,QAAI,OAAO,GAAG,EAAE,KAAK,sBAAsB;AAAA,EAC/C;AACF,CAAC;AAED,mBAAmB,IAAI,4BAAwB,yCAAoB,+BAAiB,+BAAW,CAAC,GAAG,OAAO,KAAc,QAAkB;AACxI,MAAI;AACF,UAAM,SAAS,IAAI;AACnB,UAAM,YAAQ,2BAAe,OAAO,KAAK;AACzC,UAAM,GAAG,mBAAmB,KAAK;AACjC,QAAI,KAAK,SAAS;AAAA,EACpB,SAAS,KAAP;AACE,QAAI,OAAO,GAAG,EAAE,KAAK,sBAAsB;AAAA,EAC/C;AACF,CAAC;AAED,mBAAmB,KAAK,oBAAoB,YAAa,OAAO,KAAc,QAAkB;AAC9F,MAAI;AACF,YAAQ,IAAI,kBAAiB,IAAI,IAAI;AACrC,QAAI,KAAK,SAAS;AAAA,EACpB,SAAS,KAAP;AACE,QAAI,OAAO,GAAG,EAAE,KAAK,sBAAsB;AAAA,EAC/C;AACF,CAAC;",
  "names": ["import_express", "bodyParser", "express"]
}
