{
  "version": 3,
  "sources": ["../user.data.ts"],
  "sourcesContent": ["import { RawUser, User } from \"./user.schema\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { readFile, writeFile } from 'fs-extra'\n\ntype Store = {\n  users: User[]\n}\n\ntype Entities = keyof Store;\n\nconst readStoreAndGetKey = async  <T extends Entities>(key: T): Promise<Store[T]> => {\n  const currentDataAsString: string = await readFile(\"./store.json\", \"utf-8\")\n  const parsed: Store = JSON.parse(currentDataAsString);\n  return parsed[key]\n}\n\nconst writeKeyToStore = async  <T extends Entities>(key: T, data: Store[T]): Promise<void> => {\n  const currentDataAsString: string = await readFile(\"./store.json\", \"utf-8\")\n  const parsed: any = JSON.parse(currentDataAsString);\n  const toUpdate = { ...parsed, [key]: data }\n  await writeFile(\"./store.json\", JSON.stringify(toUpdate))\n}\n\nexport const addUser = async (user: RawUser) => {\n  const currentUsers = await readStoreAndGetKey(\"users\")\n  const dataToInsert: User = { ...user, id: uuidv4() }\n  const listWithUserAdded = currentUsers.concat(dataToInsert)\n  await writeKeyToStore(\"users\", listWithUserAdded)\n  return dataToInsert\n}\n\nexport const getAllUsers = async (): Promise<User[]> => {\n  const currentUsers = await readStoreAndGetKey(\"users\")\n  return currentUsers\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,kBAA6B;AAC7B,sBAAoC;AAQpC,MAAM,qBAAqB,OAA4B,QAA8B;AACnF,QAAM,sBAA8B,UAAM,0BAAS,gBAAgB,OAAO;AAC1E,QAAM,SAAgB,KAAK,MAAM,mBAAmB;AACpD,SAAO,OAAO;AAChB;AAEA,MAAM,kBAAkB,OAA4B,KAAQ,SAAkC;AAC5F,QAAM,sBAA8B,UAAM,0BAAS,gBAAgB,OAAO;AAC1E,QAAM,SAAc,KAAK,MAAM,mBAAmB;AAClD,QAAM,WAAW,EAAE,GAAG,QAAQ,CAAC,MAAM,KAAK;AAC1C,YAAM,2BAAU,gBAAgB,KAAK,UAAU,QAAQ,CAAC;AAC1D;AAEO,MAAM,UAAU,OAAO,SAAkB;AAC9C,QAAM,eAAe,MAAM,mBAAmB,OAAO;AACrD,QAAM,eAAqB,EAAE,GAAG,MAAM,QAAI,YAAAA,IAAO,EAAE;AACnD,QAAM,oBAAoB,aAAa,OAAO,YAAY;AAC1D,QAAM,gBAAgB,SAAS,iBAAiB;AAChD,SAAO;AACT;AAEO,MAAM,cAAc,YAA6B;AACtD,QAAM,eAAe,MAAM,mBAAmB,OAAO;AACrD,SAAO;AACT;",
  "names": ["uuidv4"]
}
